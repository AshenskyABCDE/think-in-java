## 如何处理系统设计面试题？

第一步 描述场景

谁会用他？用户会怎么用，有多少用户？明白系统的作用和希望处理数据量

第二步 创造一个更高级的设计

用重要组件来描绘一个高层级的设计

第三步 设计核心组件

第四步 扩展设计

## CAP理论

一致性 每次访问都能得到最新数据，但可能会收到错误相应

可用性 每次访问都能收到非错相应 但不能获取到最新数据

分区容错性 在任意分区网络故障下系统仍可继续运行

CP 等待分区节点的响应会导致延时错误，如果需要原子读写，cp是一个不错的选择

AP 相应节点上可用数据的最近版本不是最新的，分区解析玩，写入数据需要一些时间传播，如果业务需要最终一致性，或者外部故障时要求系统继续运行，AP是一个不错的选择。

## 一致性模式

弱一致性

尽力优化能看到最新数据，一般是游戏视频聊天中，重新连接是听不到中断的信息的。

最终一致性

在写入后，访问最终能看到写入数据，数据被异步复制

强一致性

在文件系统和关系型数据库中使用的是此种方式

## 可用性模式

有两种高可用的模式：故障切换和复制

## 异步

异步工作流有助于减少那些原本顺序执行的请求时间，可以提前进行一些耗时的工作来减少请求时间

### 消息队列

应用程序将作业发布到队列，然后通知用户作业状态

一个worker从队列中取出该作业，对其进行处理