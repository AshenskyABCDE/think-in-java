## JVM的内存模型介绍

分为虚拟机栈、本地方法栈、堆、程序计数器、元空间

堆：存放对象实例，从垃圾回收的角度说分为新生代和老年代

虚拟机栈：用于存放局部变量表和方法返回地址

本地方法栈：为native方法服务

程序计数器：记录程序的指令码

元空间：存放类元数据、静态变量

## 堆和栈的区别

1.用途：堆用于存放实例的对象，栈用于存放局部变量，方法调用的参数

2.生命周期：栈中有确定的生命周期，比如方法的调用，存储的局部变量也会随之消失。堆中的对象需要被垃圾回收才会消失。

3.存取速度：栈的存取速度比堆快，因为堆涉及到垃圾回收影响到性能

4.存储空间：栈的空间较小，且固定。堆的空间较大，动态扩展

5.可见性：栈中的对象对线程是私有的，堆中的对象对线程是可见的。

## java的垃圾回收触发机制

内存不足

手动请求

jvm参数

对象数量或内存使用达到阈值

## 判断垃圾的方法

引用计数法：为每个对象分配一个计数器，如果被引用，计数器+1，取消被引用时，计数器-1

可达性分析算法：从一组成为gc root跟往下引下去，如果没有被任何一条链引用，就可被回收

## 垃圾回收器

G1收集器：标记-整理算法，java堆并行收集器，垃圾回收的范围是整个java堆

CMS收集器：运用标记-清楚算法，老年代收集器

![image-20250406164605896](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20250406164605896.png)
